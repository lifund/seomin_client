<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- stylesheet_placeholder -->
    
    <!-- Font : Nanum -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/moonspam/NanumSquare@1.0/nanumsquare.css">
    <title>서민피자 | 지점 안내</title>
</head>
<body>

    <!-- 상단바 + 상단메뉴 컨테이너 -->
    <div id="headerMaster">
        <div id="headerContainer">
            <!-- 상단바 -->
            <header>
                <a href="/home">
                    <img src="public/icons/logo_white.png" alt="서민피자 로고">
                </a>
                <!-- === --><svg id="navButton_enter" width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><line x1="17" y1="28" x2="39" y2="28" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"></line><line x1="17" y1="36" x2="39" y2="36" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"></line><line x1="17" y1="20" x2="39" y2="20" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"></line></svg>
                <!-- XXX --><svg id="navButton_leave" style="display: none;" width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 36L36 20" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"></path><path d="M20 20L36 36" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"></path></svg>
            </header><!-- EndOf 상단바 -->


            <!-- 상단 메뉴 -->
            <nav>
                <a class="navButton" href="/brand">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="info_24px"><path id="icon/action/info_24px" fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM11 7V9H13V7H11ZM11 11V17H13V11H11ZM4 12C4 16.41 7.59 20 12 20C16.41 20 20 16.41 20 12C20 7.59 16.41 4 12 4C7.59 4 4 7.59 4 12Z" fill="black" fill-opacity="0.54"></path></g></svg>
                    <p>브랜드 소개</p>
                </a>
                <a class="navButton" href="/menu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="restaurant_menu_24px"><path id="icon/maps/restaurant_menu_24px" fill-rule="evenodd" clip-rule="evenodd" d="M19.8495 9.93832C18.2595 11.5283 16.1095 12.0283 14.5795 11.3183L13.1095 12.7883L19.9895 19.6683L18.5795 21.0783L11.6995 14.1983L4.80945 21.0683L3.39945 19.6583L13.1595 9.89832C12.4495 8.36832 12.9495 6.21832 14.5395 4.62832C16.4595 2.71832 19.1995 2.35832 20.6595 3.81832C22.1295 5.28832 21.7595 8.02832 19.8495 9.93832ZM10.6295 10.2983L7.79945 13.1283L3.60945 8.94832C2.04945 7.37832 2.04945 4.84832 3.60945 3.28832L10.6295 10.2983Z" fill="black" fill-opacity="0.54"></path></g></svg>
                    <p>메뉴 소개</p>
                </a>
                <a class="navButton" href="/shop">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="location_on_24px"><path id="icon/communication/location_on_24px" fill-rule="evenodd" clip-rule="evenodd" d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM7 9C7 6.24 9.24 4 12 4C14.76 4 17 6.24 17 9C17 11.88 14.12 16.19 12 18.88C9.92 16.21 7 11.85 7 9ZM9.5 9C9.5 7.61929 10.6193 6.5 12 6.5C12.8932 6.5 13.7185 6.9765 14.1651 7.75C14.6116 8.5235 14.6116 9.4765 14.1651 10.25C13.7185 11.0235 12.8932 11.5 12 11.5C10.6193 11.5 9.5 10.3807 9.5 9Z" fill="black" fill-opacity="0.54"></path></g></svg>
                    <p>지점 안내</p>
                </a>
                <a class="navButton" href="/franchise">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="location_city_24px"><path id="icon/social/location_city_24px" fill-rule="evenodd" clip-rule="evenodd" d="M15 5.5V11.5H21V21.5H3V7.5H9V5.5L12 2.5L15 5.5ZM5 19.5H7V17.5H5V19.5ZM7 15.5H5V13.5H7V15.5ZM5 11.5H7V9.5H5V11.5ZM11 19.5V17.5H13V19.5H11ZM11 13.5V15.5H13V13.5H11ZM11 11.5V9.5H13V11.5H11ZM11 5.5V7.5H13V5.5H11ZM19 19.5H17V17.5H19V19.5ZM17 15.5H19V13.5H17V15.5Z" fill="black" fill-opacity="0.54"></path></g></svg>
                    <p>프렌차이즈 안내</p>
                </a>
            </nav><!-- EndOf 상단 메뉴 -->  
        </div>
    </div>

    <div id="sectionBanner">
        <p>지점 안내</p>
    </div>

    <main>
        <h2>지점 목록</h2>
        <button id="selectRegion">지역 선택하기</button><a id="shopInquiry" href="shop/inquiry">고객의 소리</a>
    
    
        <div id="select_city" class="select_popup" hidden>
            <h2>시/도 선택</h2>
            <!-- menu_fold --><svg id="select_city_close" width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 36L36 20" stroke="black" stroke-width="2" stroke-linecap="round"/><path d="M20 20L36 36" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>
            <div id="select_city_container" class="select_popup_container"></div>
        </div>
    
        <div id="select_district" class="select_popup" hidden>
            <h2>군/구 선택</h2>
            <!-- menu_back --><svg id="select_district_back" width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M31 21L24 28.8L30.4615 36" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <!-- menu_fold --><svg id="select_district_close" width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 36L36 20" stroke="black" stroke-width="2" stroke-linecap="round"/><path d="M20 20L36 36" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>
            <div id="select_district_container"  class="select_popup_container"></div>
        </div>
    
        <div id="popupOverlay" hidden></div>
    
        <div id="shopList" class="m__shop_container"></div>
        <div id="region_data" class="m__region_data" hidden></div>
    </main>
    

    <footer>
        <div id="footer_container">
            <a href="/privacystatement">개인정보 취급방침</a>
    
            <br>
            <br>
            <p>상호 : 서민피자</p>
            <p>도로명주소 : 대구시 북구 동암로38길 9-39</p>
            <p>지번주소 : 대구시 북구 구암동 777-5</p>
            <br>
            <p>고객센터 : 1899-1917</p>
            <br>
            <p>(c) 2020 서민피자 ALL RIGHTS RESERVED</p>
            <br>
    
            <a href="">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M40 20C40 8.95312 31.0469 0 20 0C8.95312 0 0 8.95312 0 20C0 31.0469 8.95312 40 20 40C20.1172 40 20.2344 40 20.3516 39.9922V24.4297H16.0547V19.4219H20.3516V15.7344C20.3516 11.4609 22.9609 9.13281 26.7734 9.13281C28.6016 9.13281 30.1719 9.26562 30.625 9.32812V13.7969H28C25.9297 13.7969 25.5234 14.7812 25.5234 16.2266V19.4141H30.4844L29.8359 24.4219H25.5234V39.2266C33.8828 36.8281 40 29.1328 40 20Z" fill="#959595"></path></svg>
            </a>
            <a href="">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23.8281 20C23.8281 22.1143 22.1143 23.8281 20 23.8281C17.8857 23.8281 16.1719 22.1143 16.1719 20C16.1719 17.8857 17.8857 16.1719 20 16.1719C22.1143 16.1719 23.8281 17.8857 23.8281 20Z" fill="#959595"></path><path d="M28.9529 13.2271C28.7689 12.7285 28.4753 12.2771 28.0938 11.9066C27.7233 11.5251 27.2723 11.2316 26.7733 11.0475C26.3687 10.8904 25.7607 10.7033 24.6411 10.6523C23.4298 10.5971 23.0667 10.5852 20.0002 10.5852C16.9335 10.5852 16.5704 10.5968 15.3594 10.652C14.2397 10.7033 13.6315 10.8904 13.2272 11.0475C12.7282 11.2316 12.2769 11.5251 11.9067 11.9066C11.5252 12.2771 11.2316 12.7281 11.0473 13.2271C10.8901 13.6318 10.7031 14.24 10.6521 15.3597C10.5969 16.5706 10.585 16.9338 10.585 20.0005C10.585 23.0669 10.5969 23.4301 10.6521 24.6413C10.7031 25.761 10.8901 26.3689 11.0473 26.7736C11.2316 27.2725 11.5249 27.7236 11.9064 28.0941C12.2769 28.4755 12.7279 28.7691 13.2269 28.9531C13.6315 29.1106 14.2397 29.2977 15.3594 29.3486C16.5704 29.4039 16.9332 29.4155 19.9999 29.4155C23.067 29.4155 23.4301 29.4039 24.6407 29.3486C25.7604 29.2977 26.3687 29.1106 26.7733 28.9531C27.7749 28.5668 28.5665 27.7751 28.9529 26.7736C29.11 26.3689 29.2971 25.761 29.3484 24.6413C29.4036 23.4301 29.4152 23.0669 29.4152 20.0005C29.4152 16.9338 29.4036 16.5706 29.3484 15.3597C29.2974 14.24 29.1104 13.6318 28.9529 13.2271ZM20.0002 25.8974C16.7431 25.8974 14.1027 23.2573 14.1027 20.0002C14.1027 16.743 16.7431 14.103 20.0002 14.103C23.2571 14.103 25.8975 16.743 25.8975 20.0002C25.8975 23.2573 23.2571 25.8974 20.0002 25.8974ZM26.1306 15.248C25.3695 15.248 24.7524 14.6309 24.7524 13.8698C24.7524 13.1087 25.3695 12.4916 26.1306 12.4916C26.8917 12.4916 27.5088 13.1087 27.5088 13.8698C27.5085 14.6309 26.8917 15.248 26.1306 15.248Z" fill="#959595"></path><path d="M20 0C8.95599 0 0 8.95599 0 20C0 31.044 8.95599 40 20 40C31.044 40 40 31.044 40 20C40 8.95599 31.044 0 20 0ZM31.4151 24.7348C31.3596 25.9573 31.1652 26.792 30.8813 27.5226C30.2847 29.0652 29.0652 30.2847 27.5226 30.8813C26.7923 31.1652 25.9573 31.3593 24.7351 31.4151C23.5104 31.4709 23.1192 31.4844 20.0003 31.4844C16.8811 31.4844 16.4902 31.4709 15.2652 31.4151C14.043 31.3593 13.208 31.1652 12.4777 30.8813C11.7111 30.593 11.0172 30.141 10.4434 29.5566C9.85931 28.9832 9.40735 28.2889 9.11896 27.5226C8.83514 26.7923 8.64075 25.9573 8.58521 24.7351C8.52875 23.5101 8.51562 23.1189 8.51562 20C8.51562 16.8811 8.52875 16.4899 8.5849 15.2652C8.64044 14.0427 8.83453 13.208 9.11835 12.4774C9.40674 11.7111 9.85901 11.0168 10.4434 10.4434C11.0168 9.85901 11.7111 9.40704 12.4774 9.11865C13.208 8.83484 14.0427 8.64075 15.2652 8.5849C16.4899 8.52905 16.8811 8.51562 20 8.51562C23.1189 8.51562 23.5101 8.52905 24.7348 8.58521C25.9573 8.64075 26.792 8.83484 27.5226 9.11835C28.2889 9.40674 28.9832 9.85901 29.5569 10.4434C30.141 11.0172 30.5933 11.7111 30.8813 12.4774C31.1655 13.208 31.3596 14.0427 31.4154 15.2652C31.4713 16.4899 31.4844 16.8811 31.4844 20C31.4844 23.1189 31.4713 23.5101 31.4151 24.7348Z" fill="#959595"></path></svg>
            </a>
        </div>
    </footer>

    <script>
        function containsClass(yourObj, yourClass) {
            if(!yourObj || typeof yourClass !== 'string') {
                return false;
            } else if(yourObj.className && yourObj.className.trim().split(/\s+/gi).indexOf(yourClass) > -1) {
                return true;
            } else {
                return false;
            }
        }

        function removeClass(yourObj, yourClass) {
            var regex = new RegExp(yourClass, "g");
            yourObj.className = yourObj.className.replace(regex, "");
        }

        function addClass(yourObj, yourClass) {
            var regex = new RegExp(yourClass, "g");
            yourObj.className += ' ' + yourClass;
        }

        /*------------------------------------------------*/
        /*-------------------- MOBILE --------------------*/
        /*-------------------- NAV CSS --------------------*/
        var nav = document.querySelector('nav');
        var navButton_enter = document.getElementById('navButton_enter');
        var navButton_leave = document.getElementById('navButton_leave');

        function navButtonFunction(ev){
            console.log('fires');
            if(containsClass(nav,'nav_enter')){
                addClass(nav,'nav_leave');
                removeClass(nav,'nav_enter');
                navButton_enter.style.display = 'block';
                navButton_leave.style.display = 'none';
            }else{
                addClass(nav,'nav_enter');
                removeClass(nav,'nav_leave');
                navButton_enter.style.display = 'none';
                navButton_leave.style.display = 'block';
            }
        }
        navButton_enter.addEventListener('click', navButtonFunction, false);
        navButton_leave.addEventListener('click', navButtonFunction, false);


        /*------------------------------------------------*/
        /*-------------------- ALL --------------------*/
        /*------------------------------------------------*/

        function filterShopList(){
            console.log(city_filter);
            console.log(district_filter);
            var shopCards = document.getElementsByClassName('shopCard');
            for(var i=0; i<shopCards.length; i++){
                if( containsClass( shopCards[i],city_filter )&& containsClass(shopCards[i],district_filter) ){
                    shopCards[i].removeAttribute('hidden');
                    console.log(shopCards[i]);
                }else {
                    shopCards[i].setAttribute('hidden','');
                }
            }
        }

        var city_filter = '';
        var district_filter = '';

        /*-------------------- CITY POPUP MAKE --------------------*/
        var region_data = JSON.parse(document.getElementById('region_data').innerText);

        var city_data = Object.keys(region_data);
        
        var select_city_container = document.getElementById('select_city_container');
        
        for(var i=0; i<city_data.length; i++){
            var cityList =  document.createElement('div');
            var regionName = document.createElement('p');
            regionName.className += ' region_name';
            regionName.innerText = city_data[i];
            var regionCount = document.createElement('p');
            regionCount.className += ' region_count';
            regionCount.innerText = '('+ region_data[city_data[i]].count +')';
            cityList.appendChild(regionName);
            cityList.appendChild(regionCount);
            cityList.className += ' regionList';
            cityList.className += ' regionList_city';
            select_city_container.appendChild(cityList);
        }

        /*-------------------- CITY POPUP SHOW/HIDE --------------------*/
        document.getElementById('selectRegion').addEventListener('click',function(ev){
            document.getElementById('select_city').removeAttribute('hidden');
            document.getElementById('popupOverlay').removeAttribute('hidden');
        },false);

        document.getElementById('select_city_close').addEventListener('click',function(ev){
            document.getElementById('select_city').setAttribute('hidden','');
            document.getElementById('popupOverlay').setAttribute('hidden','');
        },false);

        document.getElementById('popupOverlay').addEventListener('click',function(ev){
            if(ev.target.id=='popupOverlay'){
                document.getElementById('select_city').setAttribute('hidden','');
                document.getElementById('popupOverlay').setAttribute('hidden','');
                document.getElementById('select_district').setAttribute('hidden','');
            }
        },false);



        /*-------------------- DISTRICT POPUP SHOW/HIDE --------------------*/
        var select_city_buttons = document.getElementsByClassName('regionList_city');
        for(var i=0; i<select_city_buttons.length; i++){
            

            if(select_city_buttons[i].getElementsByClassName('region_name')[0].innerText == '전체'){
                select_city_buttons[i].addEventListener('click',function(ev){
                    city_filter = 'shopCard';
                    district_filter = 'shopCard';
                    document.getElementById('select_city').setAttribute('hidden','');
                    document.getElementById('popupOverlay').setAttribute('hidden','');
                    filterShopList();
                });
            } else {
                select_city_buttons[i].addEventListener('click',function(ev){
                    city_filter = ev.currentTarget.getElementsByClassName('region_name')[0].innerText;

                    var district_data = region_data[city_filter].district;

                    var district_keys = Object.keys(district_data);

                    var select_district_container = document.getElementById('select_district_container');
                    select_district_container.innerHTML='';
                    for(var j=0; j<district_keys.length; j++){
                        var districtList =  document.createElement('div');
                        var districtName = document.createElement('p');
                        var districtCount = document.createElement('p');

                        districtName.className += ' region_name';
                        districtName.innerText = district_keys[j];
                        districtCount.className += ' region_count';
                        districtCount.innerText = '('+ district_data[district_keys[j]] +')';
                        districtList.appendChild(districtName);
                        districtList.appendChild(districtCount);
                        districtList.className += ' regionList';
                        districtList.className += ' regionList_city';

                        if(districtName.innerText == '전체'){
                            districtList.addEventListener('click',function(ev){
                                district_filter = 'shopCard';
                                document.getElementById('select_district').setAttribute('hidden','');
                                document.getElementById('popupOverlay').setAttribute('hidden','');
                                filterShopList();
                            });
                        }else{
                            districtList.addEventListener('click',function(ev){
                                district_filter = ev.currentTarget.getElementsByClassName('region_name')[0].innerText;
                                document.getElementById('select_district').setAttribute('hidden','');
                                document.getElementById('popupOverlay').setAttribute('hidden','');
                                filterShopList();
                            });
                        }

                        select_district_container.appendChild(districtList);
                    }

                    document.getElementById('select_city').setAttribute('hidden','');
                    document.getElementById('select_district').removeAttribute('hidden');
                },false);
            }
        }

        document.getElementById('select_district_back').addEventListener('click',function(ev){
            document.getElementById('select_district').setAttribute('hidden','');
            document.getElementById('select_city').removeAttribute('hidden');
        });
        document.getElementById('select_district_close').addEventListener('click',function(ev){
            document.getElementById('select_district').setAttribute('hidden','');
            document.getElementById('popupOverlay').setAttribute('hidden','');
        });
    </script>

</body>
</html>